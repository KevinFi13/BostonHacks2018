<html>
    <head>
        <title>GIPHY Image Processing</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="results-script.js"></script>

         <!--Include the java library for plotly-->
		<script defer src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        
        <script type="text/javascript">
            //PLOT THE HISTOGRAM
            //========================================
            function plot(x)
            {
                var trace1 = {
                    x: [1,2,3,4],
                    y: [0.2, 0.4, 0.01, 0.8],
                    mode: 'lines',
                    name: 'Spike Intensity',
                    line: {
                        color: 'blue',
                        width: 2
                    }
                };

                var trace2 = {
                    x: [1,2,3,4],
                    y: [0.3525, 0.3525, 0.3525, 0.3525],
                    mode: 'lines',
                    name: 'Average Intensity',
                    line: {
                        color: 'red',
                        width: 4
                    }
                };
                
                var layout = {
                    autosize: false,
                    width: 500,
                    height: 500,
                    margin: {
                        l: 50,
                        r: 50,
                        b: 100,
                        t: 100,
                        pad: 4
                    },
                    title: "GIF Intensity Chart", 
                    xaxis: {title: "Spike Number"}, 
                    yaxis: {title: "Spike Intensity"},		  
			    };
                
                var data = [trace1, trace2];
			
                Plotly.newPlot('graph', data, layout);
                
            }
            
            //JS function to plot the histogram
            function parseData(str, word)
            {
                //INFORMATION FOR HISTOGRAM
                //=============================================
                var arrStr = str.split(""); //separates each character in str into an array
                var arrWord = word.split(""); //separates each character in word into an array
                
                
                var indexes=[], k = 0; //variables to be used in order to splice arrStr
                
                for (var i in arrStr) //for every element in arrStr
                {
                    var erase = true;
                    
                    //if there is a match in arrWord in arrStr, then do not erase
                    for (var j in arrWord)
                    {
                        if (arrStr[i] == arrWord[j])
                        {
                            erase = false;
                        }
                    }
                    
                    //if there is no match, then take note of that index saved in the array called indexes
                    if(erase)
                    {
                            indexes[k] = i;   
                            k++;
                    }
                }
                
                //When splicing, the length gets shorter by 1 each time. That is why we use k to represent the updated length of arrStr
                k = 0;
                for (var i in indexes)
                {
                    arrStr.splice(indexes[i]-k, 1);
                    k++;
                }
                
                plot(arrStr);
            }
        </script>
    </head>

    <body>
        <h2>What Goes On In The Background</h2>
        <div id="first"></div>

        <form action="javascript:parseData('hello','hello')">
            <input type="submit" value="find">
        </form>
        <div id="graph"></div>

        <h1>VS</h1>
        <h2>What The User Sees</h2>
        <div id="second" style="position: absolute;"></div>

        
    </body>
</html>